{{!-- Dashboard that renders only the user's blogs --}}
<div class="container center-align">
    <div class="blog_banner">
        <h2>{{user_name}}'s Sphere-O-Influence</h2>
    </div>
</div>

<section class="section container">
    <div class="row">
        <div class="col s12 m8 offset-m2 l8 offset-l2">
            <p class="flow-text center-align">Blog Posts</p>
            <div class="collection" id="blogpost-style" >
                {{!-- Button fo create blog post --}}
                <button class="btn" id="create-blogpost">Create Blog Post</button>
                <div id="create-blogpost-form" style="display: none;">
                    <form id="add-blogpost-form">
                        <div class="input-field">
                            <input type="text" name="title" id="blogpost-title">
                            <label for="blogpost-title">Title</label>
                        </div>
                        <div class="input-field">
                            <textarea id="blogpost-content" class="materialize-textarea"></textarea>
                            <label for="blogpost-content">Content</label>
                        </div>
                        <button type="submit" class="btn">Create</button>
                        <button type="button" class="btn" id="cancel-blogpost">Cancel</button>
                    </form>
                </div>
                {{#each blogs}}
                    <div class="blogpost">
                    <h2>{{title}}</h2>
                    <p>{{content}}</p>
                    <p>By {{user.first_name}} {{user.last_name}}</p>
                    <p>Created on {{format_date date_created}}</p>
                    <button class="btn" id="toggle-comments-{{id}}">Toggle Comments</button>
                    <!-- Comments container -->
                    <div id="comments-{{id}}" style="display: none;">
                    {{#each comments}}
                        <div class="comment">
                        <p>{{comment_text}}</p>
                        <p>By {{user.first_name}} {{user.last_name}}</p>
                        </div>
                    {{/each}}
                    <form id="comment-form-{{id}}" class="comment-form">
                        <div class="input-field">
                        <textarea id="comment-content-{{id}}" class="materialize-textarea"></textarea>
                        <label for="comment-content-{{id}}">Add your comment</label>
                        </div>
                        <button type="submit" class="btn" id="comment-content-{{id}}">Submit</button>
                    </form>
                    </div>
                    {{!-- button for edit blog post --}}
                    <button class="btn" id="edit-blogpost-{{id}}">Edit Blog Post</button>
                    <div id="edit-blogpost-container-{{id}}" style="display: none;">
                        <form id="edit-blogpost-form" class="edit-blogpost">
                            <div class="input-field">
                                <input type="text" name="title" id="blogpost-title-{{id}}" value="{{title}}">
                                <label for="blogpost-title-{{id}}">Title</label>
                            </div>
                            <div class="input-field">
                                <textarea id="blogpost-content-{{id}}" class="materialize-textarea">{{content}}</textarea>
                                <label for="blogpost-content-{{id}}">Content</label>
                            </div>
                            <button type="submit" class="btn" id="update-blogpost-{{id}}">Update</button>
                            <button type="button" class="btn" id="cancel-blogpost-{{id}}">Cancel</button>
                        </form>
                    </div>
                    {{!-- button for delete blog post --}}
                    <button class="btn" id="delete-blogpost-{{id}}">Delete Blog Post</button>
                {{/each}}
                
            </div>
        </div>
    </div>
</section>

{{!-- for error handling // cannot be triggered --}}
<form id="comment-form-{{id}}" class="comment-form" style="display:none">
    <div class="input-field">
    <textarea id="comment-content-{{id}}" class="materialize-textarea"></textarea>
    <label for="comment-content-{{id}}">Add your comment</label>
    </div>
    <button type="submit" class="btn" id="comment-content-{{id}}">Submit</button>
</form>

<script src="/js/blogpost.js"></script>
<script src="/js/comment.js"></script>
